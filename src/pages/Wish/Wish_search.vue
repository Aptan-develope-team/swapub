<template>
<div>
<!-- <body class="wish searchPage"> -->
	<!-- Header -->
	<app-header></app-header>
	<!-- Header END -->
	<div id="main">
		<div class="breadcrumb">
			<i>Swapub</i><i> &#62; 交換</i><i> &#62; 搜尋</i><i></i><i></i>
		</div>
		<div class="content">
			<div class="mainBtPad">
				<a class="action"><i><img src="../../../static/images/btn_searchitem_w.png" alt=""></i>物品</a>
				<a>人名<i><img src="../../../static/images/btn_searchname_w.png" alt=""></i></a>
			</div>
			<p class="searchCounter">搜尋結果：<span>9</span>筆符合</p>
			<div class="conBlock srItemPad action">
				<div class="itemPad">
					<div class="itemBox">
						<div class="itemTitle">
							<h4>我想要...</h4>
							<h3>棒球帽</h3>
						</div>
						<div class="itemImg"><img src="../../../static/images/wss_it_img_1.jpg" alt=""></div>
						<a href="wish_detail.html"></a>
						<div class="itemInfo">
							<p>類似此素色款式棒球帽，用商品交換，喜歡再留言</p>
							<p class="timer">1小時前</p>
							<span class="iUser"><i><img src="../../../static/images/ws_user_img_1.png" alt=""></i>Amy Tesi</span>
							<span class="iChat">5</span>
						</div>
					</div>
					<div class="itemBox">
						<div class="itemTitle">
							<h4>我想要...</h4>
							<h3>adidas棒球帽</h3>
						</div>
						<div class="itemImg"><img src="../../../static/images/wss_it_img_2.jpg" alt=""></div>
						<a href="wish_detail.html"></a>
						<div class="itemInfo">
							<p>盡量為老帽款式，不要有髒汙，太舊請不要留言喔，有味道也請不要留言</p>
							<p class="timer">20小時前</p>
							<span class="iUser"><i><img src="../../../static/images/ws_user_img_3.png" alt=""></i>Andy labor</span>
							<span class="iChat">29</span>
						</div>
					</div>
					<div class="itemBox noImg">
						<div class="itemTitle">
							<h4>我想要...</h4>
							<h3>帽T</h3>
						</div>
						<div class="itemImg"><img src="#" alt=""></div>
						<a href="wish_detail.html"></a>
						<div class="itemInfo">
							<p>只換GAP外套或黑色深藍（好看顏色皆可）尺寸S~M</p>
							<p class="timer">2天前</p>
							<span class="iUser"><i><img src="../../../static/images/ws_user_img_2.png" alt=""></i>Peter Lin</span>
							<span class="iChat">6</span>
						</div>
					</div>
					<div class="itemBox">
						<div class="itemTitle">
							<h4>我想要...</h4>
							<h3>演唱會共遊</h3>
						</div>
						<div class="itemImg"><img src="../../../static/images/wss_it_img_3.jpg" alt=""></div>
						<a href="wish_detail.html"></a>
						<div class="itemInfo">
							<p>直購，請問仿冒來瞎充，發現一律提告</p>
							<p class="timer">14小時前</p>
							<span class="iUser"><i><img src="../../../static/images/ws_user_img_2.png" alt=""></i>Peter Lin</span>
							<span class="iChat">6</span>
						</div>
					</div>
					<div class="itemBox noImg">
						<div class="itemTitle">
							<h4>我想要...</h4>
							<h3>安全帽 可樂帽</h3>
						</div>
						<div class="itemImg"><img src="#" alt=""></div>
						<a href="wish_detail.html"></a>
						<div class="itemInfo">
							<p>有的可以私訊我喔！太舊跟有味道不要</p>
							<p class="timer">2天前</p>
							<span class="iUser"><i><img src="../../../static/images/ws_user_img_3.png" alt=""></i>Andy labor</span>
							<span class="iChat">6</span>
						</div>
					</div>
					<div class="itemBox noImg">
						<div class="itemTitle">
							<h4>我想要...</h4>
							<h3>演唱會共遊</h3>
						</div>
						<div class="itemImg"><img src="#" alt=""></div>
						<a href="wish_detail.html"></a>
						<div class="itemInfo">
							<p>男女都可，適合國小中學生都可，物閩請勿太糟。用版上東西交換，有喜歡版上東西再留言。也可以多換一...</p>
							<p class="timer">2天前</p>
							<span class="iUser"><i><img src="../../../static/images/ws_user_img_2.png" alt=""></i>Peter Lin</span>
							<span class="iChat">6</span>
						</div>
					</div>
					<div class="itemBox">
						<div class="itemTitle">
							<h4>我想要...</h4>
							<h3>潮流帽</h3>
						</div>
						<div class="itemImg"><img src="../../../static/images/wss_it_img_4.jpg" alt=""></div>
						<a href="wish_detail.html"></a>
						<div class="itemInfo">
							<p>用版上商品換等值帽子</p>
							<p class="timer">20小時前</p>
							<span class="iUser"><i><img src="../../../static/images/ws_user_img_3.png" alt=""></i>Andy labor</span>
							<span class="iChat">29</span>
						</div>
					</div>
					<div class="itemBox">
						<div class="itemTitle">
							<h4>我想要...</h4>
							<h3>棒球帽</h3>
						</div>
						<div class="itemImg"><img src="../../../static/images/wss_it_img_5.jpg" alt=""></div>
						<a href="wish_detail.html"></a>
						<div class="itemInfo">
							<p>收各式樣的棒球帽，不限品牌，有都可以先討論，再決定要不要收，款式越新越好，願意出高價收</p>
							<p class="timer">18小時前</p>
							<span class="iUser"><i><img src="../../../static/images/ws_user_img_3.png" alt=""></i>Andy labor</span>
							<span class="iChat">6</span>
						</div>
					</div>
					<div class="itemBox noImg">
						<div class="itemTitle">
							<h4>我想要...</h4>
							<h3>帽T</h3>
						</div>
						<div class="itemImg"><img src="#" alt=""></div>
						<a href="wish_detail.html"></a>
						<div class="itemInfo">
							<p>希望能近全新，想要白色帽子用mini8交換，可以再留言</p>
							<p class="timer">2017/10/21</p>
							<span class="iUser"><i><img src="../../../static/images/ws_user_img_3.png" alt=""></i>Andy labor</span>
							<span class="iChat">6</span>
						</div>
					</div>
					<div class="itemBox">
						<div class="itemTitle">
							<h4>我想要...</h4>
							<h3>各式老帽</h3>
						</div>
						<div class="itemImg"><img src="../../../static/images/wss_it_img_6.jpg" alt=""></div>
						<a href="wish_detail.html"></a>
						<div class="itemInfo">
							<p>只收素色黑白款 僅換物！一換一為優先～等值或喜歡僅pchome交換</p>
							<p class="timer">18小時前</p>
							<span class="iUser"><i><img src="../../../static/images/ws_user_img_4.png" alt=""></i>我(Jing YunLee)</span>
							<span class="iChat">6</span>
						</div>
					</div>
				</div>
			</div>
			<div class="conBlock srNamePad">
				<div class="itemPad">
					<div class="itemBox">
						<div class="itemImg"><img src="../../../static/images/sr_na_img_1.jpg" alt=""></div>
						<div class="itemTitle"><h3>Sia</h3></div><a href="menu_u_myitem_other.html?j"></a>
					</div>
					<div class="itemBox">
						<div class="itemImg"><img src="../../../static/images/sr_na_img_2.jpg" alt=""></div>
						<div class="itemTitle"><h3>Sam</h3></div><a href="menu_u_myitem_other.html?j"></a>
					</div>
					<div class="itemBox">
						<div class="itemImg"><img src="../../../static/images/sr_na_img_3.jpg" alt=""></div>
						<div class="itemTitle"><h3>Sphia</h3></div><a href="menu_u_myitem_other.html?j"></a>
					</div>
					<div class="itemBox">
						<div class="itemImg"><img src="../../../static/images/sr_na_img_4.jpg" alt=""></div>
						<div class="itemTitle"><h3>Sam antoner</h3></div><a href="menu_u_myitem_other.html?j"></a>
					</div>
					<div class="itemBox">
						<div class="itemImg"><img src="../../../static/images/sr_na_img_5.jpg" alt=""></div>
						<div class="itemTitle"><h3>Steven</h3></div><a href="menu_u_myitem_other.html?j"></a>
					</div>
				</div>
			</div>
<!--
			<p class="hotSearch">熱門搜尋：<a>iphone</a><a>ps4</a><a>adidas</a>
			<a>vans</a><a>後背包</a><a>外套</a><a>switch</a><a>niek</a></p>
-->
		</div>
	   <div class="btn_openPop"></div>
	</div><!-- main END -->
	
	<!-- Footer -->
	<app-footer></app-footer>
	<div class="backTop CGt"></div>
	<!-- Light Box -->
	<div id="popContainer" style="top:-100vh;">
		<div class="popContent"></div>
	</div>
	<!-- Loader  -->
	<div class="loadPad"><div class="loader_g"><i></i><i></i><i></i><i></i></div></div>
	</div>
</template>

<script>
import Header from "../../components/Header.vue";
import Footer from "../../components/Footer.vue";
export default {
  components: {
    "app-header": Header,
    "app-footer": Footer
  },
  mounted() {

    setTimeout(() => {

      var element = document.getElementById("body_class");
      element.removeAttribute("class");
      element.classList.add("wish", "searchPage");

      $(".loadPad").animate({
        opacity: 0
      }, 1000, function () {
        $(".loadPad").css({
          display: "none"
        });
      });
      $(window).on('load', function () {
        if ($(window).width() > 1024) {
          var s = skrollr.init();
        }

        $('#header').find('.market').addClass('action');

      })

      // Yep, that's it!
      //$('#scene').parallax();

      var $srType = $('.mainBtPad').find('a'),
        $srLen = $srType.length,
        $srCounter = $('.searchCounter'),
        $cAmount = $srCounter.find('span'),
        $srTypePad = $('.content').find('.conBlock'),
        $srPadLen = $srTypePad.length,
        $hotSearch = $('.hotSearch');

      $srType.click(function () {
        var ind = $(this).index();
        $cAmount.html('20');
        $hotSearch.fadeIn();
        $srType.eq(ind).addClass('action').siblings().removeClass('action');
        $srTypePad.eq(ind).addClass('action').siblings().removeClass('action');
        if (ind !== 0) {
          $cAmount.html('5');
          $hotSearch.fadeOut();
        }
      });

      $('.backTop').click(function () {
        $('html,body').animate({
          scrollTop: $('#main').offset().top
        }, 800, 'easeOutCirc');
      });

      $(document).ready(function () {
        //item排版
        var $outBox = $('.srItemPad').find('.itemPad'),
          $outBoxW = $outBox.width(),
          $allBox = $outBox.find('.itemBox'),
          boxLen = $allBox.length,
          boxW = $allBox.eq(0).outerWidth(true),
          cols = $outBoxW / boxW;

        var boxHeightArr = [],
          minHeight = 0,
          boxHeight = 0;

        for (var i = 0; i < boxLen; i++) {
          var boxH = $allBox.eq(i).outerHeight(true);
          console.log(boxHeightArr);
          if (i < cols) {
            boxHeightArr.push(boxH);
          } else {
            minHeight = Math.min(...boxHeightArr);
            var minIndex = getIndexByValue(boxHeightArr, minHeight);
            $allBox[i].style.position = 'absolute';
            $allBox[i].style.top = minHeight + 'px';
            $allBox[i].style.left = minIndex * boxW + 'px';
            boxHeightArr[minIndex] += $allBox[i].offsetHeight;
            var maxHeight = Math.max(...boxHeightArr);
            $outBox.css({
              'height': maxHeight * boxHeightArr.length / cols
            });
          }
        }

        function getIndexByValue(arr, value) {
          for (var i = 0; i < arr.length; i++) {
            if (arr[i] == value) {
              return i;
            }
          }
        }

        function loadItem() {
          var $allBox = $outBox.find('.itemBox'),
            lastBox = $allBox[$allBox.length - 1]
          lastBoxDis = lastBox.offsetTop,
            screenH = document.documentElement.clientHeight || document.body.clientHeight,
            scrollH = scroll().top,
            maxH = scrollH + screenH
          if (lastBoxDis <= maxH) {
            return true;
          } else {
            return false;
          }
        }
      })
    }, 500)
  }
}

</script>